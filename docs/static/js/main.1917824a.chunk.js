(this.webpackJsonpmask_simulation=this.webpackJsonpmask_simulation||[]).push([[0],{26:function(e,t,a){var n=a(77),o=[];e.exports=function(){var e=new Worker(a.p+"6550be473adc37541b05.worker.js",{name:"[hash].worker.js"});return n(e,o),e}},69:function(e,t,a){e.exports=a(82)},74:function(e,t,a){},75:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(24),s=a.n(i),c=(a(74),a(1)),r=(a(75),a(17)),l=a.n(r),u=a(25),m=a(3),d=a(27);function h(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}var v,f,E,b,O,g,j,p=a(26),k=a.n(p),N=a(2),y=0,w=1,M=2,S={INFECTED:0,SUSCEPTIBLE:1,RECOVERED:2},I=0,C=1,T=2,R=(v={},Object(N.a)(v,I,1),Object(N.a)(v,C,.67),Object(N.a)(v,T,.55),v),x=(f={},Object(N.a)(f,S.INFECTED,"#BB641D"),Object(N.a)(f,S.SUSCEPTIBLE,"#AAC6CA"),Object(N.a)(f,S.RECOVERED,"#CB8AC0"),f),D=(E={},Object(N.a)(E,S.INFECTED,"Infected"),Object(N.a)(E,S.SUSCEPTIBLE,"Healthy"),Object(N.a)(E,S.RECOVERED,"Recovered"),E),A=(b={},Object(N.a)(b,S.INFECTED,"\uf961"),Object(N.a)(b,S.SUSCEPTIBLE,"\uf406"),Object(N.a)(b,S.RECOVERED,"\uf406"),b),P=(O={},Object(N.a)(O,I,"\uf406"),Object(N.a)(O,C,"\uf963"),Object(N.a)(O,T,"\uf406"),O),F=(g={},Object(N.a)(g,I,0),Object(N.a)(g,C,3),Object(N.a)(g,T,4),g),B=(j={},Object(N.a)(j,I,"#fff"),Object(N.a)(j,C,"#000"),Object(N.a)(j,T,"#000"),j),L={attackSuccessProbability:.05,drawNodesAsIcons:!0,historyInterval:3,percentSociallyDistant:0,nNodes:50,radius:6,ticksToRecover:1e3,velocity:3.5},U={title:"",maskedType:C,nInfected:2,percentMasked:0,maskTransmissionReduction:R},H=function(e){var t=e.disease_status;return x[t]},_=function(e){var t=e.mask_status;return B[t]},V=function(e){var t=e.mask_status;return F[t]};function W(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;e.beginPath(),e.arc(t.x,t.y,t.radius-(o?o/2:0),0,2*Math.PI,!1),o>0&&(e.save(),e.strokeStyle=n||"none",e.lineWidth=o,e.stroke(),e.restore()),e.fillStyle=a,e.strokeStyle=n||"none",e.fill()}var q="Font Awesome 5 Free";function J(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\uf007",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=t.radius*o;e.font="".concat(900," ").concat(i,'px "').concat(q,'"'),e.fillStyle=a,e.fillText(n,t.x-i/2,t.y+i/2)}var K=function(e){var t=e.disease_status,a=e.mask_status;return a===I?A[t]:P[a]};function Z(){}function z(e){var t=e.onClick,a=e.className,i=e.drawFunction,s=void 0===i?function(){}:i,r=e.height,l=void 0===r?500:r,u=e.width,m=void 0===u?500:u,d=e.canvasPixelRatio,h=void 0===d?2:d,v=e.onMouseDown,f=e.onMouseMove,E=e.onMouseUp,b=e.style,O=void 0===b?{}:b,g=e.onTouchEnd,j=e.onTouchMove,p=e.onTouchStart,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=Object(n.useRef)(null);return Object(n.useEffect)((function(){var n=a.current,o=n.getContext("2d");var i=requestAnimationFrame((function(){o.clearRect(0,0,n.width,n.height),o.save(),o.scale(t,t),e(o),o.restore()}));return function(){return cancelAnimationFrame(i)}}),[e,t]),a}(s,h),N={width:"".concat(m,"px"),height:"".concat(l,"px")};return o.a.createElement("canvas",{className:a,width:m*h,height:l*h,style:Object(c.a)(Object(c.a)({},N),O),ref:k,onTouchStart:p,onTouchMove:j,onTouchEnd:g,onMouseMove:f,onMouseDown:v,onMouseUp:E,onClick:t})}a(78);var G=a(5),Q=(a(79),S.INFECTED),X=S.SUSCEPTIBLE,Y=S.RECOVERED;function $(e){var t=e.handleMouseMove,a=e.handleTouchMove,i=e.handleMouseLeave,s=e.height,c=e.margin,r=void 0===c?{top:5,left:5,bottom:5,right:5}:c,l=e.transitionDuration,u=void 0===l?1e3:l,d=e.virusHistory,h=e.nNodes,v=e.width,f=Object(n.useMemo)((function(){for(var e=2*String(d.length).length||1,t=[],a=0;a<d.length;a+=e)t.push(d[a]);return[t]}),[d]),E=Object(m.a)(f,1)[0],b=Object(n.useMemo)((function(){return[s-r.top-r.bottom,v-r.left-r.right]}),[v,s,r]),O=Object(m.a)(b,2),g=O[0],j=O[1],p=Object(n.useMemo)((function(){if(E.length){var e=Math.max(E[E.length-1].tick,2e3);return Object(G.b)().domain([0,e]).range([0,j])}return Object(G.b)()}),[E,j]),k=Object(n.useMemo)((function(){return Object(G.b)().domain([0,h]).range([g,0])}),[h,g]),N=Object(n.useMemo)((function(){return Object(G.d)().keys([Q,X,Y])(E)}),[E]),y=Object(n.useRef)();return Object(n.useLayoutEffect)((function(){var e=Object(G.a)().x((function(e){return p(e.data.tick)})).y0((function(e){return k(e[0])})).y1((function(e){return k(e[1])}));Object(G.c)(y.current).selectAll("path").data(N).join("path").attr("d",e).attr("fill",(function(e){var t=e.key;return x[t]}))}),[N,y,u,p,k]),o.a.createElement("div",{className:"stacked-area-chart-wrapper"},o.a.createElement("svg",{onMouseMove:t,onTouchMove:a,onMouseLeave:i,onTouchEnd:i,height:"100%",width:"100%",viewBox:"0 0 ".concat(v," ").concat(s),preserveAspectRatio:"none",overflow:"hidden"},o.a.createElement("g",{transform:"translate(".concat(r.left,", ").concat(r.top,")"),ref:y})))}a(80);var ee=Object.values(S).reverse();function te(e){var t=e.height,a=e.virusHistory,n=a&&a.length?a[a.length-1]:{},i=(n[S.RECOVERED]||0)+(n[S.INFECTED]||0);return o.a.createElement("div",{className:"virus-count-container",style:{height:t}},ee.map((function(e){return o.a.createElement("span",{key:e,style:{color:x[e]},className:"virus-count-label"},D[e],": ",o.a.createElement("strong",null,n[e]))})),o.a.createElement("span",{key:"total",style:{color:x[S.INFECTED]},className:"virus-count-label"},"Total infections: ",o.a.createElement("strong",null,i)))}var ae=M,ne=y,oe=w;function ie(e){var t=e.drawNodesAsIcons,a=void 0!==t&&t,i=e.height,s=void 0===i?400:i,c=e.simulationState,r=(c=void 0===c?{}:c).positionNodes,l=void 0===r?[]:r,u=c.runState,m=c.tick,d=c.virusSimulations,h=e.handleClick,v=Object(n.useMemo)((function(){return u===ae?"(touch to start a new simulation)":u===ne?"(touch to pause simulation)":u===oe&&0===m?"(touch to start simulation)":u===oe?"(touch to resume simulation)":""}),[u,m]),f=Object(n.useMemo)((function(){return a?function(e){var t=e.positionNodes,a=void 0===t?[]:t,n=e.virusNodes,o=void 0===n?[]:n;return function(e){return function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;t.forEach((function(t,s){return J(e,t,n(a[s]),o(a[s]),i)}))}(e,a,o)}}:function(e){var t=e.positionNodes,a=void 0===t?[]:t,n=e.virusNodes,o=void 0===n?[]:n;return function(e){return function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:V;t.forEach((function(t,s){return W(e,t,n(a[s]),o(a[s]),i(a[s]))}))}(e,a,o)}}}),[a]);return o.a.createElement("div",{className:"multi-simulation-container"},d&&d.map((function(e,t){var a=e.title,n=e.percentMasked,i=e.virusHistory,c=e.virusNodes;return o.a.createElement("div",{className:"simulation-group-container",key:"sim-canvas-".concat(t)},o.a.createElement("div",{className:"simulation-canvas-labels",onClick:h},o.a.createElement("span",{className:"simulation-title"},a||"".concat(n,"% mask use")),o.a.createElement("span",{className:"interaction-label"},v)),o.a.createElement("div",{style:{width:s,height:s},className:"simulation-canvas-wrapper"},o.a.createElement(z,{className:"simulation-canvas",drawFunction:f({positionNodes:l,virusNodes:c}),onClick:h,ontouchend:h,height:s,width:s})),o.a.createElement("div",{className:"stacked-area-with-labels-container",style:{width:s}},o.a.createElement(te,{virusHistory:i,height:60}),o.a.createElement($,{nNodes:c.length,virusHistory:i,height:60,width:s})))})))}var se=a(84),ce=M,re=y,le=w;function ue(e){var t=e.simulationProps,a=(t=void 0===t?Object(c.a)(Object(c.a)({},L),{},{virusSimulations:[Object(c.a)(Object(c.a)({},U),{},{title:"No mask use"})]}):t).drawNodesAsIcons,i=Object(d.a)(t,["drawNodesAsIcons"]),s=e.height,r=void 0===s?400:s,v=e.margin,f=void 0===v?{top:0,left:0,bottom:0,right:0}:v,E=e.width,b=void 0===E?400:E,O=Object(n.useState)({}),g=Object(m.a)(O,2),j=g[0],p=g[1],N=Object(se.a)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a?document.fonts.load("".concat(900,' 14px "').concat(q,'"')):{loading:!1});case 1:case"end":return e.stop()}}),e)}))),[q,a]).loading,y=Object(n.useMemo)((function(){var e=b>600?2:1,t=Math.min(r-f.top-f.bottom,(b-(f.left-f.right)*e)/e);return[t,t]}),[r,b,f]),w=Object(m.a)(y,2),M=w[0],S=w[1],I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=Object(n.useState)(null),i=Object(m.a)(o,2),s=i[0],r=i[1];return h((function(){s&&s.postMessage({action:"TICK"})}),a),Object(n.useEffect)((function(){if(!s){var a=new k.a;a.postMessage(Object(c.a)({action:"NEW_SIMULATION"},e)),a.addEventListener("message",(function(e){t(e.data)})),r(a)}}),[s,r,t,e]),[s,r]}(Object(c.a)({height:M,width:S},i),p),C=Object(m.a)(I,1)[0];Object(n.useEffect)((function(){C&&C.postMessage({action:"RESIZE",height:M,width:S})}),[M,S,C]);var T=Object(n.useCallback)((function(){j.runState===ce?C.postMessage(Object(c.a)({action:"NEW_SIMULATION",height:M,width:S},i)):j.runState===re?C.postMessage({action:"PAUSE"}):j.runState===le&&C.postMessage({action:"RESUME"})}),[C,M,S,i,j]);return!N&&o.a.createElement(ie,{drawNodesAsIcons:a,simulationState:j,handleClick:T,height:M,width:S})}a(81);function me(e){var t=e.simulationProps;return o.a.createElement("div",{className:"mask-simulation-container"},o.a.createElement(ue,{simulationProps:t}))}var de=x[S.SUSCEPTIBLE],he=x[S.INFECTED],ve=x[S.RECOVERED];var fe=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"section"},o.a.createElement("h2",{className:"title"},"Basic probability based transmission model"),o.a.createElement("div",{className:"editorial-text"},"This simulation demonstrates the concepts that mask use in the general population helps flatten the curve by lowering the overall rate of virus transmission.  If we take a base transmission rate of 5% probability of virus transmission in nodes that come in contact, we see the following scenario. Healthy, Infected, and Recovered individuals are denoted as follows:",o.a.createElement("ul",null,o.a.createElement("li",null,"Healthy (susceptible): ",o.a.createElement("i",{style:{color:de},className:"fas fa-user editorial-icon"})),o.a.createElement("li",null,"Infected (contagious): ",o.a.createElement("i",{style:{color:he},className:"fas fa-head-side-cough editorial-icon"})),o.a.createElement("li",null,"Recovered (immune & not contagious): ",o.a.createElement("i",{style:{color:ve},className:"fas fa-user editorial-icon"})))),o.a.createElement("div",{className:"editorial-text"},o.a.createElement("strong",null,"Click/touch the gray box to start/stop/reset simulations")),o.a.createElement(me,{simulationProps:Object(c.a)(Object(c.a)({},L),{},{virusSimulations:[Object(c.a)(Object(c.a)({},U),{},{title:"5% transmission, no masks",percentMasked:0})]})})),o.a.createElement("div",{className:"section"},o.a.createElement("h2",{className:"title"},"No masks vs 95% mask use"),o.a.createElement("div",{className:"editorial-text"},"Now lets run two simulations like the one above that have the same contacts for each node and the same transmission probabilities, but now we'll add masks to one simulation. ",o.a.createElement("strong",null,"Masked individuals are denoted by the"," ",o.a.createElement("i",{className:"fas fa-head-side-mask editorial-icon"})," icon"),", while their color denotes infection status as above:",o.a.createElement("ul",null,o.a.createElement("li",null,"Healthy (no mask): ",o.a.createElement("i",{style:{color:de},className:"fas fa-user editorial-icon"}),", (masked): ",o.a.createElement("i",{style:{color:de},className:"fas fa-head-side-mask editorial-icon"})),o.a.createElement("li",null,"Infected (no mask): ",o.a.createElement("i",{style:{color:he},className:"fas fa-head-side-cough editorial-icon"}),", (masked): ",o.a.createElement("i",{style:{color:he},className:"fas fa-head-side-mask editorial-icon"})),o.a.createElement("li",null,"Recovered (no mask): ",o.a.createElement("i",{style:{color:ve},className:"fas fa-user editorial-icon"}),", (masked): ",o.a.createElement("i",{style:{color:ve},className:"fas fa-head-side-mask editorial-icon"})))),o.a.createElement("div",{className:"editorial-text"},"Here we assume that the masks reduce the probability of virus transmission by 33% for both the infected person and the healthy person. See how the model changes."),o.a.createElement(me,{simulationProps:Object(c.a)(Object(c.a)({},L),{},{virusSimulations:[Object(c.a)(Object(c.a)({},U),{},{title:"No mask use",percentMasked:0}),Object(c.a)(Object(c.a)({},U),{},{title:"95% mask use",percentMasked:95})]})})),o.a.createElement("div",{className:"section"},o.a.createElement("h2",{className:"title"},"Masks with Social Distancing really flattens the curve"),o.a.createElement("div",{className:"editorial-text"},"Partial social distancing can be mimicked by requiring certain nodes to stay fixed, resulting in fewer contacts with other nodes. Here's a scenario where, ",o.a.createElement("strong",null,"in both cases, ",75,"% of the nodes are socially distant"),". Although the motions of still-moving nodes are different for the simulations above, the curves should generally be flatter for the socially distant simulations than for simulations where all nodes are moving."),o.a.createElement(me,{simulationProps:Object(c.a)(Object(c.a)({},L),{},{percentSociallyDistant:75,virusSimulations:[Object(c.a)(Object(c.a)({},U),{},{title:"No mask use, ".concat(75,"% social distancing"),percentMasked:0}),Object(c.a)(Object(c.a)({},U),{},{title:"95% mask use, ".concat(75,"% social distancing"),percentMasked:95})]})})))};s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(fe,null)),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.1917824a.chunk.js.map