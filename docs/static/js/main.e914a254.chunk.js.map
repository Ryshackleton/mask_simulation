{"version":3,"sources":["hooks/useSimulation/simulation.worker.js","hooks/useInterval/index.js","hooks/useSimulation/constants.js","hooks/useSimulation/renderUtils.js","hooks/useSimulation/index.js","components/Canvas/Canvas2d.js","hooks/useCanvas/index.js","components/MultiSimulationContainer/MultiSimulationContainer.jsx","components/MaskSimulation/MaskSimulation.jsx","components/MaskSimulation/MaskSimulationContainer.jsx","App.js","serviceWorker.js","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","DISEASE","MASK","MASK_ATTACK_REDUCTION","COLOR_BY_DISEASE","STROKE_WIDTH_BY_MASK","STROKE_COLOR_BY_MASK","defaultFillFunction","disease_status","defaultStrokeFunction","mask_status","defaultStrokeWidthFunction","drawNode","ctx","node","fill","stroke","strokeWidth","beginPath","arc","x","y","radius","Math","PI","save","strokeStyle","lineWidth","restore","fillStyle","noop","Canvas2d","onClick","className","drawFunction","height","width","canvasPixelRatio","onMouseDown","onMouseMove","onMouseUp","style","onTouchEnd","onTouchMove","onTouchStart","canvasRef","draw","ratio","canvas","getContext","animationFrameId","requestAnimationFrame","clearRect","scale","cancelAnimationFrame","useCanvas","sizeInPixels","ref","positionNodes","virusNodes","nodes","fillFunction","strokeFunction","strokeWidthFunction","forEach","index","drawNodes","MultiSimulationContainer","simulationState","isRunning","isStasisReached","virusSimulations","handleClick","interactionMessage","useMemo","map","title","percentMasked","key","ontouchend","defaultProps","attackSuccessProbability","nNodes","ticksToRecover","velocity","maskedType","nInfected","maskTransmissionReduction","Simulation","simulationProps","containerHeight","margin","top","left","bottom","right","containerWidth","useState","setSimulationState","wrapDenom","min","onSimulationTicked","tickInterval","worker","setWorker","postMessage","action","sim","SimulationWorker","addEventListener","event","data","useSimulation","useCallback","MaskSimulationContainer","useMeasure","containerRef","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.e914a254.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = []\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"25d9a82291a8c3f90802.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","/** copied from https://overreacted.io/making-setinterval-declarative-with-react-hooks/ */\nimport { useEffect, useRef } from 'react';\n\nexport default function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","export const DISEASE = {\n  INFECTED: 0,\n  SUSCEPTIBLE: 1,\n  RECOVERED: 2,\n};\n\nexport const MASK = {\n  NO_MASK: 0,\n  NON_MEDICAL: 1,\n  MEDICAL: 2\n};\n\nexport const MASK_ATTACK_REDUCTION = {\n  [MASK.NO_MASK]: 1, // 1 = no change in transmissivity\n  [MASK.NON_MEDICAL]: 0.67,\n  [MASK.MEDICAL]: 0.55\n};\n\nexport const COLOR_BY_DISEASE = {\n  [DISEASE.INFECTED]: \"#BB641D\",\n  [DISEASE.SUSCEPTIBLE]: \"#AAC6CA\",\n  [DISEASE.RECOVERED]: \"#CB8AC0\",\n};\n\nexport const STROKE_WIDTH_BY_MASK = {\n  [MASK.NO_MASK]: 0,\n  [MASK.NON_MEDICAL]: 3,\n  [MASK.MEDICAL]: 4\n};\n\nexport const STROKE_COLOR_BY_MASK = {\n  [MASK.NO_MASK]: '#fff',\n  [MASK.NON_MEDICAL]: '#000',\n  [MASK.MEDICAL]: '#000'\n};\n","import { COLOR_BY_DISEASE, STROKE_COLOR_BY_MASK, STROKE_WIDTH_BY_MASK } from './constants';\n\nconst defaultFillFunction = ({ disease_status }) => COLOR_BY_DISEASE[disease_status];\nconst defaultStrokeFunction = ({ mask_status }) => STROKE_COLOR_BY_MASK[mask_status];\nconst defaultStrokeWidthFunction = ({ mask_status }) =>\n  STROKE_WIDTH_BY_MASK[mask_status];\n\nexport function drawNode(ctx, node, fill, stroke, strokeWidth = 2) {\n  ctx.beginPath();\n  ctx.arc(node.x, node.y, node.radius - (strokeWidth ? strokeWidth / 2 : 0), 0, Math.PI * 2, false);\n\n  if (strokeWidth > 0) {\n    ctx.save();\n    ctx.strokeStyle = stroke || 'none';\n    ctx.lineWidth = strokeWidth;\n    ctx.stroke();\n    ctx.restore();\n  }\n\n  ctx.fillStyle = fill;\n  ctx.strokeStyle = stroke || 'none';\n  ctx.fill();\n}\n\nexport function drawNodes(\n  ctx,\n  nodes,\n  virusNodes,\n  fillFunction = defaultFillFunction,\n  strokeFunction = defaultStrokeFunction,\n  strokeWidthFunction = defaultStrokeWidthFunction,\n) {\n  nodes.forEach((node, index) =>\n    drawNode(\n      ctx,\n      node,\n      fillFunction(virusNodes[index]),\n      strokeFunction(virusNodes[index]),\n      strokeWidthFunction(virusNodes[index])\n    )\n  );\n}\n","import { useState, useEffect } from 'react';\nimport useInterval from '../useInterval';\nimport SimulationWorker from 'workerize-loader!./simulation.worker'; // eslint-disable-line import/no-webpack-loader-syntax\n\nexport * from './renderUtils';\nexport * from './constants';\n\nfunction noop() {}\n\nexport default function useSimulation(simulationProps, onSimulationTicked = noop, tickInterval = 10)  {\n  const [worker, setWorker] = useState(null);\n\n  useInterval(() => {\n    if (worker) {\n      worker.postMessage({ action: 'TICK' });\n    }\n  }, tickInterval);\n\n  useEffect(() => {\n    if (!worker) {\n      const sim = new SimulationWorker();\n      sim.postMessage({\n        action: 'NEW_SIMULATION',\n        ...simulationProps,\n      });\n      sim.addEventListener('message', event => {\n        onSimulationTicked(event.data);\n      });\n      setWorker(sim);\n    }\n  }, [worker, setWorker, onSimulationTicked, simulationProps]);\n\n  return [worker, setWorker];\n}\n","import React from 'react';\nimport { useCanvas } from '../../hooks';\n\nexport default function Canvas2d({\n  onClick,\n  className,\n  drawFunction = () => {},\n  height = 500,\n  width = 500,\n  canvasPixelRatio = 2,\n  onMouseDown,\n  onMouseMove,\n  onMouseUp,\n  style = {},\n  onTouchEnd,\n  onTouchMove,\n  onTouchStart,\n}) {\n  const canvasRef = useCanvas(drawFunction, canvasPixelRatio);\n  const sizeInPixels = { width: `${width}px`, height: `${height}px` };\n  return <canvas\n    className={className}\n    width={width * canvasPixelRatio}\n    height={height * canvasPixelRatio}\n    style={{ ...sizeInPixels, ...style }}\n    ref={canvasRef}\n    onTouchStart={onTouchStart}\n    onTouchMove={onTouchMove}\n    onTouchEnd={onTouchEnd}\n    onMouseMove={onMouseMove}\n    onMouseDown={onMouseDown}\n    onMouseUp={onMouseUp}\n    onClick={onClick}\n  />;\n}\n\n","import { useRef, useEffect } from \"react\";\n\nexport default function useCanvas(draw, ratio = 1) {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    function renderFrame() {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.save();\n      ctx.scale(ratio, ratio);\n      draw(ctx);\n      ctx.restore();\n    }\n    const animationFrameId = requestAnimationFrame(renderFrame);\n\n    return () => cancelAnimationFrame(animationFrameId);\n  }, [draw, ratio]);\n\n  return canvasRef;\n}\n\n","import React, { useMemo } from 'react';\nimport Canvas2d from '../Canvas/Canvas2d';\nimport { drawNodes } from '../../hooks/useSimulation';\n\nimport './MultiSimlulationContainer.scss';\n\nconst drawFunction = ({\n  positionNodes = [],\n  virusNodes = []\n}) => ((ctx) => drawNodes(ctx, positionNodes, virusNodes));\n\nexport default function MultiSimulationContainer({\n  simulationState: {\n    isRunning,\n    isStasisReached,\n    positionNodes = [],\n    virusSimulations,\n  } = {},\n  handleClick,\n  height,\n  width,\n}) {\n  const interactionMessage = useMemo(() => {\n    if (isStasisReached) {\n      return '(touch to start a new simulation)';\n    } else if (isRunning === true) {\n      return '(touch to pause)';\n    } else if (isRunning === false) {\n      return '(touch to resume)';\n    }\n    return '';\n  }, [isRunning, isStasisReached]);\n\n  return <div className=\"multi-simulation-container\" >\n    {\n      virusSimulations\n      && virusSimulations.map(({ title, percentMasked, virusNodes }, index) => (\n        <div className=\"simulation-group-container\" key={`sim-canvas-${index}`} >\n          <div\n            className=\"simulation-canvas-labels\"\n            onClick={handleClick}\n          >\n            <span className=\"simulation-title\">{title || `${percentMasked}% mask use`}</span>\n            <span className=\"interaction-label\">{interactionMessage}</span>\n          </div>\n          <Canvas2d\n            className=\"simulation-canvas\"\n            drawFunction={drawFunction({ positionNodes, virusNodes })}\n            onClick={handleClick}\n            ontouchend={handleClick}\n            height={height}\n            width={width}\n          />\n        </div>\n      ))}\n  </div>;\n}\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useSimulation, MASK, MASK_ATTACK_REDUCTION } from '../../hooks';\nimport { MultiSimulationContainer } from '../MultiSimulationContainer';\n\nconst defaultProps = {\n  attackSuccessProbability: 0.04,\n  nNodes: 30,\n  radius: 7,\n  ticksToRecover: 1500,\n  velocity: 3,\n  virusSimulations: [\n    {\n      title: 'No mask use',\n      maskedType: MASK.NON_MEDICAL,\n      nInfected: 2,\n      percentMasked: 0,\n      maskTransmissionReduction: MASK_ATTACK_REDUCTION,\n    },\n    {\n      title: '95% mask use',\n      maskedType: MASK.NON_MEDICAL,\n      nInfected: 2,\n      percentMasked: 95,\n      maskTransmissionReduction: MASK_ATTACK_REDUCTION,\n    },\n  ],\n};\n\nexport default function Simulation({\n  simulationProps = defaultProps,\n  height: containerHeight = 400,\n  margin = { top: 20, left: 20, bottom: 20, right: 20 },\n  width: containerWidth = 400,\n}) {\n  const [simulationState, setSimulationState] = useState({});\n\n  const [height, width] = useMemo(() => {\n    const isMobile = containerWidth > 600;\n    const wrapDenom = isMobile ? 2 : 1;\n    // make space square\n    const min = Math.min(\n      containerHeight - margin.top - margin.bottom,\n      (containerWidth - (margin.left - margin.right) * wrapDenom) / wrapDenom\n    );\n    return [min, min];\n  }, [containerHeight, containerWidth, margin]);\n\n  const [worker] = useSimulation({ height, width, ...simulationProps }, setSimulationState);\n\n  useEffect(() => {\n    if (worker) {\n      worker.postMessage({ action: 'RESIZE', height, width });\n    }\n  }, [height, width, worker]);\n\n  const handleClick = useCallback(() => {\n    if (simulationState.isStasisReached) {\n      worker.postMessage({ action: 'NEW_SIMULATION', height, width, ...simulationProps });\n    } else if (simulationState.isRunning === true) {\n      worker.postMessage({ action: 'PAUSE' });\n    } else if (simulationState.isRunning === false) {\n      worker.postMessage({ action: 'RESUME' });\n    }\n  }, [worker, height, width, simulationProps, simulationState]);\n\n  return <MultiSimulationContainer\n    simulationState={simulationState}\n    handleClick={handleClick}\n    height={height}\n    width={width}\n  />;\n};\n","import React from 'react';\nimport { useMeasure } from 'react-use';\nimport MaskSimulation from './MaskSimulation';\nimport './MaskSimulationContainer.scss';\n\nexport default function MaskSimulationContainer() {\n  const [containerRef, { height, width }] = useMeasure();\n  return (\n    <div className=\"mask-simulation-container\" ref={containerRef} >\n      <MaskSimulation height={height} width={width} />\n    </div>\n  );\n}\n\n","import React from 'react';\nimport './App.css';\nimport { MaskSimulation } from './components';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <MaskSimulation />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}