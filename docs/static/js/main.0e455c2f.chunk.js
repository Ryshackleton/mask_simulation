(this.webpackJsonpmask_simulation=this.webpackJsonpmask_simulation||[]).push([[0],{24:function(e,t,a){var n=a(73),i=[];e.exports=function(){var e=new Worker(a.p+"6f69f26eebcb84571286.worker.js",{name:"[hash].worker.js"});return n(e,i),e}},66:function(e,t,a){e.exports=a(78)},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(23),s=a.n(o),c=(a(71),a(1)),r=(a(72),a(3));function l(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}var u,m,h,d,v,f=a(24),b=a.n(f),E=a(2),O=0,j=1,g=2,p={INFECTED:0,SUSCEPTIBLE:1,RECOVERED:2},k=0,M=1,N=2,w=(u={},Object(E.a)(u,k,1),Object(E.a)(u,M,.67),Object(E.a)(u,N,.55),u),y=(m={},Object(E.a)(m,p.INFECTED,"#BB641D"),Object(E.a)(m,p.SUSCEPTIBLE,"#AAC6CA"),Object(E.a)(m,p.RECOVERED,"#CB8AC0"),m),S=(h={},Object(E.a)(h,p.INFECTED,"Infected"),Object(E.a)(h,p.SUSCEPTIBLE,"Healthy"),Object(E.a)(h,p.RECOVERED,"Recovered"),h),C=(d={},Object(E.a)(d,k,0),Object(E.a)(d,M,3),Object(E.a)(d,N,4),d),T=(v={},Object(E.a)(v,k,"#fff"),Object(E.a)(v,M,"#000"),Object(E.a)(v,N,"#000"),v),I={attackSuccessProbability:.05,historyInterval:3,percentSociallyDistant:0,nNodes:40,radius:6.5,ticksToRecover:1e3,velocity:3.5},R={title:"",maskedType:M,nInfected:2,percentMasked:0,maskTransmissionReduction:w},x=function(e){var t=e.disease_status;return y[t]},P=function(e){var t=e.mask_status;return T[t]},D=function(e){var t=e.mask_status;return C[t]};function A(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;e.beginPath(),e.arc(t.x,t.y,t.radius-(i?i/2:0),0,2*Math.PI,!1),i>0&&(e.save(),e.strokeStyle=n||"none",e.lineWidth=i,e.stroke(),e.restore()),e.fillStyle=a,e.strokeStyle=n||"none",e.fill()}function B(){}function L(e){var t=e.onClick,a=e.className,o=e.drawFunction,s=void 0===o?function(){}:o,r=e.height,l=void 0===r?500:r,u=e.width,m=void 0===u?500:u,h=e.canvasPixelRatio,d=void 0===h?2:h,v=e.onMouseDown,f=e.onMouseMove,b=e.onMouseUp,E=e.style,O=void 0===E?{}:E,j=e.onTouchEnd,g=e.onTouchMove,p=e.onTouchStart,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=Object(n.useRef)(null);return Object(n.useEffect)((function(){var n=a.current,i=n.getContext("2d");var o=requestAnimationFrame((function(){i.clearRect(0,0,n.width,n.height),i.save(),i.scale(t,t),e(i),i.restore()}));return function(){return cancelAnimationFrame(o)}}),[e,t]),a}(s,d),M={width:"".concat(m,"px"),height:"".concat(l,"px")};return i.a.createElement("canvas",{className:a,width:m*d,height:l*d,style:Object(c.a)(Object(c.a)({},M),O),ref:k,onTouchStart:p,onTouchMove:g,onTouchEnd:j,onMouseMove:f,onMouseDown:v,onMouseUp:b,onClick:t})}a(74);var U=a(5),F=(a(75),p.INFECTED),H=p.SUSCEPTIBLE,_=p.RECOVERED;function V(e){var t=e.handleMouseMove,a=e.handleTouchMove,o=e.handleMouseLeave,s=e.height,c=e.margin,l=void 0===c?{top:5,left:5,bottom:5,right:5}:c,u=e.transitionDuration,m=void 0===u?1e3:u,h=e.virusHistory,d=e.nNodes,v=e.width,f=Object(n.useMemo)((function(){for(var e=2*String(h.length).length||1,t=[],a=0;a<h.length;a+=e)t.push(h[a]);return[t]}),[h]),b=Object(r.a)(f,1)[0],E=Object(n.useMemo)((function(){return[s-l.top-l.bottom,v-l.left-l.right]}),[v,s,l]),O=Object(r.a)(E,2),j=O[0],g=O[1],p=Object(n.useMemo)((function(){if(b.length){var e=Math.max(b[b.length-1].tick,2e3);return Object(U.b)().domain([0,e]).range([0,g])}return Object(U.b)()}),[b,g]),k=Object(n.useMemo)((function(){return Object(U.b)().domain([0,d]).range([j,0])}),[d,j]),M=Object(n.useMemo)((function(){return Object(U.d)().keys([F,H,_])(b)}),[b]),N=Object(n.useRef)();return Object(n.useLayoutEffect)((function(){var e=Object(U.a)().x((function(e){return p(e.data.tick)})).y0((function(e){return k(e[0])})).y1((function(e){return k(e[1])}));Object(U.c)(N.current).selectAll("path").data(M).join("path").attr("d",e).attr("fill",(function(e){var t=e.key;return y[t]}))}),[M,N,m,p,k]),i.a.createElement("div",{className:"stacked-area-chart-wrapper"},i.a.createElement("svg",{onMouseMove:t,onTouchMove:a,onMouseLeave:o,onTouchEnd:o,height:"100%",width:"100%",viewBox:"0 0 ".concat(v," ").concat(s),preserveAspectRatio:"none",overflow:"hidden"},i.a.createElement("g",{transform:"translate(".concat(l.left,", ").concat(l.top,")"),ref:N})))}a(76);var W=Object.values(p).reverse();function q(e){var t=e.height,a=e.virusHistory,n=a&&a.length?a[a.length-1]:{};return i.a.createElement("div",{className:"virus-count-container",style:{height:t}},W.map((function(e){return i.a.createElement("span",{key:e,style:{color:y[e]},className:"virus-count-label"},S[e],": ",i.a.createElement("strong",null,n[e]))})))}var J=function(e){var t=e.positionNodes,a=void 0===t?[]:t,n=e.virusNodes,i=void 0===n?[]:n;return function(e){!function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:P,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:D;t.forEach((function(t,s){return A(e,t,n(a[s]),i(a[s]),o(a[s]))}))}(e,a,i)}};function K(e){var t=e.height,a=void 0===t?400:t,o=e.simulationState,s=(o=void 0===o?{}:o).positionNodes,c=void 0===s?[]:s,r=o.runState,l=o.tick,u=o.virusSimulations,m=e.handleClick,h=Object(n.useMemo)((function(){return r===g?"(touch to start a new simulation)":r===O?"(touch to pause simulation)":r===j&&0===l?"(touch to start simulation)":r===j?"(touch to resume simulation)":""}),[r,l]);return i.a.createElement("div",{className:"multi-simulation-container"},u&&u.map((function(e,t){var n=e.title,o=e.percentMasked,s=e.virusHistory,r=e.virusNodes;return i.a.createElement("div",{className:"simulation-group-container",key:"sim-canvas-".concat(t)},i.a.createElement("div",{className:"simulation-canvas-labels",onClick:m},i.a.createElement("span",{className:"simulation-title"},n||"".concat(o,"% mask use")),i.a.createElement("span",{className:"interaction-label"},h)),i.a.createElement("div",{style:{width:a,height:a},className:"simulation-canvas-wrapper"},i.a.createElement(L,{className:"simulation-canvas",drawFunction:J({positionNodes:c,virusNodes:r}),onClick:m,ontouchend:m,height:a,width:a})),i.a.createElement("div",{className:"stacked-area-with-labels-container"},i.a.createElement(q,{virusHistory:s,height:60}),i.a.createElement(V,{nNodes:r.length,virusHistory:s,height:60,width:a})))})))}function Z(e){var t=e.simulationProps,a=void 0===t?Object(c.a)(Object(c.a)({},I),{},{virusSimulations:[Object(c.a)(Object(c.a)({},R),{},{title:"No mask use"})]}):t,o=e.height,s=void 0===o?400:o,u=e.margin,m=void 0===u?{top:0,left:0,bottom:0,right:0}:u,h=e.width,d=void 0===h?400:h,v=Object(n.useState)({}),f=Object(r.a)(v,2),E=f[0],p=f[1],k=Object(n.useMemo)((function(){var e=d>600?2:1,t=Math.min(s-m.top-m.bottom,(d-(m.left-m.right)*e)/e);return[t,t]}),[s,d,m]),M=Object(r.a)(k,2),N=M[0],w=M[1],y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=Object(n.useState)(null),o=Object(r.a)(i,2),s=o[0],u=o[1];return l((function(){s&&s.postMessage({action:"TICK"})}),a),Object(n.useEffect)((function(){if(!s){var a=new b.a;a.postMessage(Object(c.a)({action:"NEW_SIMULATION"},e)),a.addEventListener("message",(function(e){t(e.data)})),u(a)}}),[s,u,t,e]),[s,u]}(Object(c.a)({height:N,width:w},a),p),S=Object(r.a)(y,1)[0];Object(n.useEffect)((function(){S&&S.postMessage({action:"RESIZE",height:N,width:w})}),[N,w,S]);var C=Object(n.useCallback)((function(){E.runState===g?S.postMessage(Object(c.a)({action:"NEW_SIMULATION",height:N,width:w},a)):E.runState===O?S.postMessage({action:"PAUSE"}):E.runState===j&&S.postMessage({action:"RESUME"})}),[S,N,w,a,E]);return i.a.createElement(K,{simulationState:E,handleClick:C,height:N,width:w})}a(77);function z(e){var t=e.simulationProps;return i.a.createElement("div",{className:"mask-simulation-container"},i.a.createElement(Z,{simulationProps:t}))}var G=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"section"},i.a.createElement("h2",{className:"title"},"Basic probability based transmission model"),i.a.createElement("div",{className:"editorial-text"},"This simulation demonstrates the concepts that mask use in the general population helps flatten the curve by lowering the overall rate of virus transmission.  If we take a base transmission rate of 5% probability of virus transmision in nodes that come in contact, we see the following scenario."),i.a.createElement("div",{className:"editorial-text"},i.a.createElement("strong",null,"Click/touch the gray box to start/stop/reset simulations")),i.a.createElement(z,{simulationProps:Object(c.a)(Object(c.a)({},I),{},{virusSimulations:[Object(c.a)(Object(c.a)({},R),{},{title:"5% transmission, no masks",percentMasked:0})]})})),i.a.createElement("div",{className:"section"},i.a.createElement("h2",{className:"title"},"No masks vs 95% mask use"),i.a.createElement("div",{className:"editorial-text"},"Now lets run two simulations like the one above that have the same contacts for each node and the same transmission probabilities, but now we'll add masks to one simulation. ",i.a.createElement("strong",null,"Masked individuals are denoted by the black outlined circles.")," Here we assume that the masks reduce the probability of virus transmission by 33% for both the infected person and the healthy person. See how the model changes."),i.a.createElement(z,{simulationProps:Object(c.a)(Object(c.a)({},I),{},{virusSimulations:[Object(c.a)(Object(c.a)({},R),{},{title:"No mask use",percentMasked:0}),Object(c.a)(Object(c.a)({},R),{},{title:"95% mask use",percentMasked:95})]})})),i.a.createElement("div",{className:"section"},i.a.createElement("h2",{className:"title"},"Masks with Social Distancing really flattens the curve"),i.a.createElement("div",{className:"editorial-text"},"Partial social distancing can be mimicked by requiring certain nodes to stay fixed, resulting in fewer contacts with other nodes. Here's a scenario where, ",i.a.createElement("strong",null,"in both cases, ",75,"% of the nodes are socially distant"),". Although the motions of still-moving nodes are different for the simulations above, the curves should generally be flatter for the socially distant simulations than for simulations where all nodes are moving."),i.a.createElement(z,{simulationProps:Object(c.a)(Object(c.a)({},I),{},{percentSociallyDistant:75,virusSimulations:[Object(c.a)(Object(c.a)({},R),{},{title:"No mask use, ".concat(75,"% social distancing"),percentMasked:0}),Object(c.a)(Object(c.a)({},R),{},{title:"95% mask use, ".concat(75,"% social distancing"),percentMasked:95})]})})))};s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(G,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.0e455c2f.chunk.js.map