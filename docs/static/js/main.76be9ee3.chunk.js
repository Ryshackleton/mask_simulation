(this.webpackJsonpmask_simulation=this.webpackJsonpmask_simulation||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(35),i=a.n(o),c=(a(87),a(38)),r=a(3),l=(a(88),a(1)),u=a(25),m=a.n(u),d=a(36),h=a(8),v=a(40);function f(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}var E,b,g,O,p,k,j,N=a(37),y=a.n(N),w=a(2),M=0,S=1,I=2,C={INFECTED:0,SUSCEPTIBLE:1,RECOVERED:2},T=0,R=1,_=2,x=(E={},Object(w.a)(E,T,1),Object(w.a)(E,R,.67),Object(w.a)(E,_,.55),E),D=(b={},Object(w.a)(b,C.INFECTED,"#BB641D"),Object(w.a)(b,C.SUSCEPTIBLE,"#AAC6CA"),Object(w.a)(b,C.RECOVERED,"#CB8AC0"),b),P=(g={},Object(w.a)(g,C.INFECTED,"Infected"),Object(w.a)(g,C.SUSCEPTIBLE,"Healthy"),Object(w.a)(g,C.RECOVERED,"Recovered"),g),A=(O={},Object(w.a)(O,C.INFECTED,"\uf961"),Object(w.a)(O,C.SUSCEPTIBLE,"\uf406"),Object(w.a)(O,C.RECOVERED,"\uf406"),O),F=(p={},Object(w.a)(p,T,"\uf406"),Object(w.a)(p,R,"\uf963"),Object(w.a)(p,_,"\uf406"),p),B=(k={},Object(w.a)(k,T,0),Object(w.a)(k,R,3),Object(w.a)(k,_,4),k),L=(j={},Object(w.a)(j,T,"#fff"),Object(w.a)(j,R,"#000"),Object(w.a)(j,_,"#000"),j),U={attackSuccessProbability:.05,drawNodesAsIcons:!0,historyInterval:3,percentSociallyDistant:0,nNodes:40,radius:6,ticksToRecover:1e3,velocity:3.5},H={title:"",maskedType:R,nInfected:2,percentMasked:0,maskTransmissionReduction:x},V=function(e){var t=e.disease_status;return D[t]},W=function(e){var t=e.mask_status;return L[t]},q=function(e){var t=e.mask_status;return B[t]};function J(e,t,a,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;e.beginPath(),e.arc(t.x,t.y,t.radius-(s?s/2:0),0,2*Math.PI,!1),s>0&&(e.save(),e.strokeStyle=n||"none",e.lineWidth=s,e.stroke(),e.restore()),e.fillStyle=a,e.strokeStyle=n||"none",e.fill()}var K="Font Awesome 5 Free";function Z(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\uf007",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=t.radius*s;e.font="".concat(900," ").concat(o,'px "').concat(K,'"'),e.fillStyle=a,e.fillText(n,t.x-o/2,t.y+o/2)}var z=function(e){var t=e.disease_status,a=e.mask_status;return a===T?A[t]:F[a]};function G(){}function Q(e){var t=e.onClick,a=e.className,o=e.drawFunction,i=void 0===o?function(){}:o,c=e.height,r=void 0===c?500:c,u=e.width,m=void 0===u?500:u,d=e.canvasPixelRatio,h=void 0===d?2:d,v=e.onMouseDown,f=e.onMouseMove,E=e.onMouseUp,b=e.style,g=void 0===b?{}:b,O=e.onTouchEnd,p=e.onTouchMove,k=e.onTouchStart,j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=Object(n.useRef)(null);return Object(n.useEffect)((function(){var n=a.current,s=n.getContext("2d");var o=requestAnimationFrame((function(){s.clearRect(0,0,n.width,n.height),s.save(),s.scale(t,t),e(s),s.restore()}));return function(){return cancelAnimationFrame(o)}}),[e,t]),a}(i,h),N={width:"".concat(m,"px"),height:"".concat(r,"px")};return s.a.createElement("canvas",{className:a,width:m*h,height:r*h,style:Object(l.a)(Object(l.a)({},N),g),ref:j,onTouchStart:k,onTouchMove:p,onTouchEnd:O,onMouseMove:f,onMouseDown:v,onMouseUp:E,onClick:t})}a(91);var X=a(11),Y=(a(92),C.INFECTED),$=C.SUSCEPTIBLE,ee=C.RECOVERED;function te(e){var t=e.handleMouseMove,a=e.handleTouchMove,o=e.handleMouseLeave,i=e.height,c=e.margin,r=void 0===c?{top:5,left:5,bottom:5,right:5}:c,l=e.transitionDuration,u=void 0===l?1e3:l,m=e.virusHistory,d=e.nNodes,v=e.width,f=Object(n.useMemo)((function(){for(var e=2*String(m.length).length||1,t=[],a=0;a<m.length;a+=e)t.push(m[a]);return[t]}),[m]),E=Object(h.a)(f,1)[0],b=Object(n.useMemo)((function(){return[i-r.top-r.bottom,v-r.left-r.right]}),[v,i,r]),g=Object(h.a)(b,2),O=g[0],p=g[1],k=Object(n.useMemo)((function(){if(E.length){var e=Math.max(E[E.length-1].tick,2e3);return Object(X.b)().domain([0,e]).range([0,p])}return Object(X.b)()}),[E,p]),j=Object(n.useMemo)((function(){return Object(X.b)().domain([0,d]).range([O,0])}),[d,O]),N=Object(n.useMemo)((function(){return Object(X.d)().keys([Y,$,ee])(E)}),[E]),y=Object(n.useRef)();return Object(n.useLayoutEffect)((function(){var e=Object(X.a)().x((function(e){return k(e.data.tick)})).y0((function(e){return j(e[0])})).y1((function(e){return j(e[1])}));Object(X.c)(y.current).selectAll("path").data(N).join("path").attr("d",e).attr("fill",(function(e){var t=e.key;return D[t]}))}),[N,y,u,k,j]),s.a.createElement("div",{className:"stacked-area-chart-wrapper"},s.a.createElement("svg",{onMouseMove:t,onTouchMove:a,onMouseLeave:o,onTouchEnd:o,height:"100%",width:"100%",viewBox:"0 0 ".concat(v," ").concat(i),preserveAspectRatio:"none",overflow:"hidden"},s.a.createElement("g",{transform:"translate(".concat(r.left,", ").concat(r.top,")"),ref:y})))}a(93);var ae=Object.values(C).reverse();function ne(e){var t=e.height,a=e.virusHistory,n=a&&a.length?a[a.length-1]:{},o=(n[C.RECOVERED]||0)+(n[C.INFECTED]||0);return s.a.createElement("div",{className:"virus-count-container",style:{height:t}},ae.map((function(e){return s.a.createElement("span",{key:e,style:{color:D[e]},className:"virus-count-label"},P[e],": ",s.a.createElement("strong",null,n[e]))})),s.a.createElement("span",{key:"total",style:{color:D[C.INFECTED]},className:"virus-count-label"},"Total infections: ",s.a.createElement("strong",null,o)))}var se=I,oe=M,ie=S;function ce(e){var t=e.drawNodesAsIcons,a=void 0!==t&&t,o=e.height,i=void 0===o?400:o,c=e.simulationState,r=(c=void 0===c?{}:c).positionNodes,l=void 0===r?[]:r,u=c.runState,m=c.tick,d=c.virusSimulations,h=e.handleClick,v=Object(n.useMemo)((function(){return u===se?"(touch to start a new simulation)":u===oe?"(touch to pause simulation)":u===ie&&0===m?"(touch to start simulation)":u===ie?"(touch to resume simulation)":""}),[u,m]),f=Object(n.useMemo)((function(){return a?function(e){var t=e.positionNodes,a=void 0===t?[]:t,n=e.virusNodes,s=void 0===n?[]:n;return function(e){return function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;t.forEach((function(t,i){return Z(e,t,n(a[i]),s(a[i]),o)}))}(e,a,s)}}:function(e){var t=e.positionNodes,a=void 0===t?[]:t,n=e.virusNodes,s=void 0===n?[]:n;return function(e){return function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:W,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q;t.forEach((function(t,i){return J(e,t,n(a[i]),s(a[i]),o(a[i]))}))}(e,a,s)}}}),[a]);return s.a.createElement("div",{className:"multi-simulation-container"},d&&d.map((function(e,t){var a=e.title,n=e.percentMasked,o=e.virusHistory,c=e.virusNodes;return s.a.createElement("div",{className:"simulation-group-container",key:"sim-canvas-".concat(t)},s.a.createElement("div",{className:"simulation-canvas-labels",onClick:h},s.a.createElement("span",{className:"simulation-title"},a||"".concat(n,"% mask use")),s.a.createElement("span",{className:"interaction-label"},v)),s.a.createElement("div",{style:{width:i,height:i},className:"simulation-canvas-wrapper"},s.a.createElement(Q,{className:"simulation-canvas",drawFunction:f({positionNodes:l,virusNodes:c}),onClick:h,ontouchend:h,height:i,width:i})),s.a.createElement("div",{className:"stacked-area-with-labels-container",style:{width:i}},s.a.createElement(ne,{virusHistory:o,height:60}),s.a.createElement(te,{nNodes:c.length,virusHistory:o,height:60,width:i})))})))}var re=a(103),le=I,ue=M,me=S;function de(e){var t=e.simulationProps,a=(t=void 0===t?Object(l.a)(Object(l.a)({},U),{},{virusSimulations:[Object(l.a)(Object(l.a)({},H),{},{title:"No mask use"})]}):t).drawNodesAsIcons,o=Object(v.a)(t,["drawNodesAsIcons"]),i=e.height,c=void 0===i?350:i,r=e.margin,u=void 0===r?{top:0,left:0,bottom:0,right:0}:r,E=e.width,b=void 0===E?350:E,g=Object(n.useState)({}),O=Object(h.a)(g,2),p=O[0],k=O[1],j=Object(re.a)(Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a?document.fonts.load("".concat(900,' 14px "').concat(K,'"')):{loading:!1});case 1:case"end":return e.stop()}}),e)}))),[K,a]).loading,N=Object(n.useMemo)((function(){var e=b>600?2:1,t=Math.min(c-u.top-u.bottom,(b-(u.left-u.right)*e)/e);return[t,t]}),[c,b,u]),w=Object(h.a)(N,2),M=w[0],S=w[1],I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=Object(n.useState)(null),o=Object(h.a)(s,2),i=o[0],c=o[1];return f((function(){i&&i.postMessage({action:"TICK"})}),a),Object(n.useEffect)((function(){if(!i){var a=new y.a;a.postMessage(Object(l.a)({action:"NEW_SIMULATION"},e)),a.addEventListener("message",(function(e){t(e.data)})),c(a)}}),[i,c,t,e]),[i,c]}(Object(l.a)({height:M,width:S},o),k),C=Object(h.a)(I,1)[0];Object(n.useEffect)((function(){C&&C.postMessage({action:"RESIZE",height:M,width:S})}),[M,S,C]);var T=Object(n.useCallback)((function(){p.runState===le?C.postMessage(Object(l.a)({action:"NEW_SIMULATION",height:M,width:S},o)):p.runState===ue?C.postMessage({action:"PAUSE"}):p.runState===me&&C.postMessage({action:"RESUME"})}),[C,M,S,o,p]);return!j&&s.a.createElement(ce,{drawNodesAsIcons:a,simulationState:p,handleClick:T,height:M,width:S})}a(94);function he(e){var t=e.simulationProps;return s.a.createElement("div",{className:"mask-simulation-container"},s.a.createElement(de,{simulationProps:t}))}a(95);var ve=D[C.SUSCEPTIBLE],fe=D[C.INFECTED],Ee=D[C.RECOVERED];function be(e){return e.isMasked?s.a.createElement("ul",{className:"legend-text"},s.a.createElement("li",null,"Healthy (no mask): ",s.a.createElement("i",{style:{color:ve},className:"fas fa-user legend-icon"}),", (masked): ",s.a.createElement("i",{style:{color:ve},className:"fas fa-head-side-mask legend-icon"})),s.a.createElement("li",null,"Infected (no mask): ",s.a.createElement("i",{style:{color:fe},className:"fas fa-head-side-cough legend-icon"}),", (masked): ",s.a.createElement("i",{style:{color:fe},className:"fas fa-head-side-mask legend-icon"})),s.a.createElement("li",null,"Recovered (no mask): ",s.a.createElement("i",{style:{color:Ee},className:"fas fa-user legend-icon"}),", (masked): ",s.a.createElement("i",{style:{color:Ee},className:"fas fa-head-side-mask legend-icon"}))):s.a.createElement("ul",{className:"legend-text"},s.a.createElement("li",null,"Healthy (susceptible): ",s.a.createElement("i",{style:{color:ve},className:"fas fa-user legend-icon"})),s.a.createElement("li",null,"Infected (contagious): ",s.a.createElement("i",{style:{color:fe},className:"fas fa-head-side-cough legend-icon"})),s.a.createElement("li",null,"Recovered (immune & not contagious): ",s.a.createElement("i",{style:{color:Ee},className:"fas fa-user legend-icon"})))}var ge=Object(l.a)(Object(l.a)({},U),{},{virusSimulations:[Object(l.a)(Object(l.a)({},H),{},{title:"5% transmission, no masks",percentMasked:0})]}),Oe=Object(l.a)(Object(l.a)({},U),{},{virusSimulations:[Object(l.a)(Object(l.a)({},H),{},{title:"No mask use",percentMasked:0}),Object(l.a)(Object(l.a)({},H),{},{title:"95% mask use",percentMasked:95})]}),pe=Object(l.a)(Object(l.a)({},U),{},{percentSociallyDistant:75,virusSimulations:[Object(l.a)(Object(l.a)({},H),{},{title:"No mask use, ".concat(75,"% social distancing"),percentMasked:0}),Object(l.a)(Object(l.a)({},H),{},{title:"95% mask use, ".concat(75,"% social distancing"),percentMasked:95})]});var ke=function(){return s.a.createElement(c.a,null,s.a.createElement(r.c,null,s.a.createElement(r.a,{path:"/mask_simulation/no_masks"},s.a.createElement(he,{simulationProps:ge})),s.a.createElement(r.a,{path:"/mask_simulation/no_masks_vs_masks"},s.a.createElement(he,{simulationProps:Oe})),s.a.createElement(r.a,{path:"/mask_simulation/no_masks_vs_masks_with_social_distancing"},s.a.createElement(he,{simulationProps:pe})),s.a.createElement(r.a,{path:"/mask_simulation/masks_legend"},s.a.createElement(be,{isMasked:!0})),s.a.createElement(r.a,{path:"/mask_simulation/no_masks_legend"},s.a.createElement(be,{isMasked:!1})),s.a.createElement(r.a,{path:"/"},s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"section"},s.a.createElement("h2",{className:"title"},"Basic probability based transmission model"),s.a.createElement("div",{className:"editorial-text"},"This simulation demonstrates the concepts that mask use in the general population helps flatten the curve by lowering the overall rate of virus transmission.  If we take a base transmission rate of 5% probability of virus transmission in nodes that come in contact, we see the following scenario. Healthy, Infected, and Recovered individuals are denoted as follows:",s.a.createElement(be,{isMasked:!1})),s.a.createElement("div",{className:"editorial-text"},s.a.createElement("strong",null,"Click/touch the gray box to start/stop/reset simulations")),s.a.createElement(he,{simulationProps:ge})),s.a.createElement("div",{className:"section"},s.a.createElement("h2",{className:"title"},"No masks vs 95% mask use"),s.a.createElement("div",{className:"editorial-text"},"Now lets run two simulations like the one above that have the same contacts for each node and the same transmission probabilities, but now we'll add masks to one simulation. ",s.a.createElement("strong",null,"Masked individuals are denoted by the"," ",s.a.createElement("i",{className:"fas fa-head-side-mask editorial-icon"})," icon"),", while their color denotes infection status as above:",s.a.createElement(be,{isMasked:!0})),s.a.createElement("div",{className:"editorial-text"},"Here we assume that the masks reduce the probability of virus transmission by 33% for both the infected person and the healthy person. See how the model changes."),s.a.createElement(he,{simulationProps:Oe})),s.a.createElement("div",{className:"section"},s.a.createElement("h2",{className:"title"},"Masks with Social Distancing really flattens the curve"),s.a.createElement("div",{className:"editorial-text"},"Partial social distancing can be mimicked by requiring certain nodes to stay fixed, resulting in fewer contacts with other nodes. Here's a scenario where, ",s.a.createElement("strong",null,"in both cases, ",75,"% of the nodes are socially distant"),". Although the motions of still-moving nodes are different for the simulations above, the curves should generally be flatter for the socially distant simulations than for simulations where all nodes are moving."),s.a.createElement(he,{simulationProps:pe}))))))};i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ke,null)),document.getElementById("root"))},37:function(e,t,a){var n=a(90),s=[];e.exports=function(){var e=new Worker(a.p+"9eb42a4ed7890ed51c35.worker.js",{name:"[hash].worker.js"});return n(e,s),e}},82:function(e,t,a){e.exports=a(101)},87:function(e,t,a){},88:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.76be9ee3.chunk.js.map