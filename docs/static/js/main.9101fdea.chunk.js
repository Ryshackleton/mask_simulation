(this.webpackJsonpmask_simulation=this.webpackJsonpmask_simulation||[]).push([[0],[,,,,,,function(e,t,n){var a=n(15),o=[];e.exports=function(){var e=new Worker(n.p+"59b474bd33a3b5a0fcb3.worker.js",{name:"[hash].worker.js"});return a(e,o),e}},,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(5),c=n.n(i),s=(n(13),n(14),n(3)),r=n(20),u=n(2);function l(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}var d,h,v,m,f=n(6),b=n.n(f),g=n(1),j=0,O=1,p=2,k=0,E=1,w=2,M=(d={},Object(g.a)(d,k,1),Object(g.a)(d,E,.67),Object(g.a)(d,w,.55),d),N=(h={},Object(g.a)(h,j,"#BB641D"),Object(g.a)(h,O,"#AAC6CA"),Object(g.a)(h,p,"#CB8AC0"),h),S=(v={},Object(g.a)(v,k,0),Object(g.a)(v,E,3),Object(g.a)(v,w,4),v),R=(m={},Object(g.a)(m,k,"#fff"),Object(g.a)(m,E,"#000"),Object(g.a)(m,w,"#000"),m),T=function(e){var t=e.disease_status;return N[t]},y=function(e){var t=e.mask_status;return R[t]},C=function(e){var t=e.mask_status;return S[t]};function I(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;e.beginPath(),e.arc(t.x,t.y,t.radius-(o?o/2:0),0,2*Math.PI,!1),o>0&&(e.save(),e.strokeStyle=a||"none",e.lineWidth=o,e.stroke(),e.restore()),e.fillStyle=n,e.strokeStyle=a||"none",e.fill()}function A(){}function x(e){var t=e.onClick,n=e.className,i=e.drawFunction,c=void 0===i?function(){}:i,s=e.height,r=void 0===s?500:s,l=e.width,d=void 0===l?500:l,h=e.canvasPixelRatio,v=void 0===h?2:h,m=e.onMouseDown,f=e.onMouseMove,b=e.onMouseUp,g=e.style,j=void 0===g?{}:g,O=e.onTouchEnd,p=e.onTouchMove,k=e.onTouchStart,E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var a=n.current,o=a.getContext("2d");var i=requestAnimationFrame((function(){o.clearRect(0,0,a.width,a.height),o.save(),o.scale(t,t),e(o),o.restore()}));return function(){return cancelAnimationFrame(i)}}),[e,t]),n}(c,v),w={width:"".concat(d,"px"),height:"".concat(r,"px")};return o.a.createElement("canvas",{className:n,width:d*v,height:r*v,style:Object(u.a)(Object(u.a)({},w),j),ref:E,onTouchStart:k,onTouchMove:p,onTouchEnd:O,onMouseMove:f,onMouseDown:m,onMouseUp:b,onClick:t})}n(16);var _=function(e){var t=e.positionNodes,n=void 0===t?[]:t,a=e.virusNodes,o=void 0===a?[]:a;return function(e){return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C;t.forEach((function(t,c){return I(e,t,a(n[c]),o(n[c]),i(n[c]))}))}(e,n,o)}};function P(e){var t=e.simulationState,n=(t=void 0===t?{}:t).isRunning,i=t.isStasisReached,c=t.positionNodes,s=void 0===c?[]:c,r=t.virusSimulations,u=e.handleClick,l=e.height,d=e.width,h=Object(a.useMemo)((function(){return i?"(touch to start a new simulation)":!0===n?"(touch to pause)":!1===n?"(touch to resume)":""}),[n,i]);return o.a.createElement("div",{className:"multi-simulation-container"},r&&r.map((function(e,t){var n=e.title,a=e.percentMasked,i=e.virusNodes;return o.a.createElement("div",{className:"simulation-group-container",key:"sim-canvas-".concat(t)},o.a.createElement("div",{className:"simulation-canvas-labels",onClick:u},o.a.createElement("span",{className:"simulation-title"},n||"".concat(a,"% mask use")),o.a.createElement("span",{className:"interaction-label"},h)),o.a.createElement(x,{className:"simulation-canvas",drawFunction:_({positionNodes:s,virusNodes:i}),onClick:u,ontouchend:u,height:l,width:d}))})))}var U={attackSuccessProbability:.05,nNodes:30,radius:7,ticksToRecover:1500,velocity:3,virusSimulations:[{title:"No mask use",maskedType:E,nInfected:2,percentMasked:0,maskTransmissionReduction:M},{title:"95% mask use",maskedType:E,nInfected:2,percentMasked:95,maskTransmissionReduction:M}]};function W(e){var t=e.simulationProps,n=void 0===t?U:t,i=e.height,c=void 0===i?400:i,r=e.margin,d=void 0===r?{top:20,left:20,bottom:20,right:20}:r,h=e.width,v=void 0===h?400:h,m=Object(a.useState)({}),f=Object(s.a)(m,2),g=f[0],j=f[1],O=Object(a.useMemo)((function(){var e=v>600?2:1,t=Math.min(c-d.top-d.bottom,(v-(d.left-d.right)*e)/e);return[t,t]}),[c,v,d]),p=Object(s.a)(O,2),k=p[0],E=p[1],w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=Object(a.useState)(null),i=Object(s.a)(o,2),c=i[0],r=i[1];return l((function(){c&&c.postMessage({action:"TICK"})}),n),Object(a.useEffect)((function(){if(!c){var n=new b.a;n.postMessage(Object(u.a)({action:"NEW_SIMULATION"},e)),n.addEventListener("message",(function(e){t(e.data)})),r(n)}}),[c,r,t,e]),[c,r]}(Object(u.a)({height:k,width:E},n),j),M=Object(s.a)(w,1)[0];Object(a.useEffect)((function(){M&&M.postMessage({action:"RESIZE",height:k,width:E})}),[k,E,M]);var N=Object(a.useCallback)((function(){g.isStasisReached?M.postMessage(Object(u.a)({action:"NEW_SIMULATION",height:k,width:E},n)):!0===g.isRunning?M.postMessage({action:"PAUSE"}):!1===g.isRunning&&M.postMessage({action:"RESUME"})}),[M,k,E,n,g]);return o.a.createElement(P,{simulationState:g,handleClick:N,height:k,width:E})}n(17);function B(){var e=Object(r.a)(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=a.height,c=a.width;return o.a.createElement("div",{className:"mask-simulation-container",ref:n},o.a.createElement(W,{height:i,width:c}))}var F=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.9101fdea.chunk.js.map